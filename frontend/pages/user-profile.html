<div class="container mt-4">
  <h2>User Profile</h2>
  <div id="user-info" class="mb-4 border p-3 bg-light rounded shadow-sm"></div>

  <h4 class="mb-3">User's Gigs</h4>
  <div id="user-gigs" class="row g-3"></div>

  <h4 class="mt-4">Favorite Gigs</h4>
  <div class="row" id="user-favorites"></div>
</div>

<!-- Edit Gig Modal -->
<div class="modal fade" id="editGigModal" tabindex="-1" aria-labelledby="editGigModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editGigModalLabel">Edit Gig</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="edit-gig-id">
        <div class="mb-3">
          <label>Title</label>
          <input type="text" class="form-control" id="edit-gig-title">
        </div>
        <div class="mb-3">
          <label>Price ($)</label>
          <input type="number" class="form-control" id="edit-gig-price">
        </div>
        <div class="mb-3">
          <label>Status</label>
          <select class="form-select" id="edit-gig-status">
            <option value="active">Active</option>
            <option value="paused">Paused</option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" onclick="submitEditGig()">Save Changes</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="payModal" tabindex="-1" aria-labelledby="payModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg"> 
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="payModalLabel">Choose Payment Method</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p class="mb-3">How would you like to pay this freelancer?</p>

        <div class="d-flex flex-column gap-3 align-items-center">
          <button id="walletPayBtn" class="btn btn-outline-primary w-100 max-w-400">
            Pay with Wallet
          </button>

          <div id="paypal-button-container" class="w-100 max-w-400"></div>

          <button id="cryptoPayBtn" class="btn btn-dark w-100 max-w-400">
            Pay with Crypto
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- View Application Modal -->
<div class="modal fade" id="viewApplicationModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Application Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <p><strong>Message:</strong></p>
        <p id="applicationMessage" class="border p-2 bg-light rounded"></p>

        <p class="mt-3"><strong>CV:</strong></p>
        <div id="applicationCv"></div>
      </div>
    </div>
  </div>
</div>


<style>
  .modal-lg {
    max-width: 700px;
  }

  .max-w-400 {
    max-width: 400px;
  }

  #paypal-button-container,
  #walletPayBtn,
  #cryptoPayBtn {
    display: block;
    margin: 0 auto;
  }

  #paypal-button-container iframe {
    transition: all 0.3s ease-in-out;
  }

  .application-entry {
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.application-entry:hover {
  background-color: #f8f9fa;
}

</style>


<script src="services/user-profile.js?v=1.3"></script>
<script>
  const userId = localStorage.getItem("viewingUserId");
  if (userId) {
    loadUserProfile(userId);
  } else {
    document.querySelector("#user-info").innerHTML =
      `<div class="alert alert-warning">No user selected.</div>`;
  }
</script>

<!-- <script src="https://www.paypal.com/sdk/js?client-id=<?= PAYPAL_CLIENT_ID ?>&currency=USD"></script> -->
